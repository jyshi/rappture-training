c ----------------------------------------------------------------------
c  MAIN PROGRAM - generated by the Rappture Builder
c ----------------------------------------------------------------------
      program main
        IMPLICIT NONE

c       stuff needed for Rappture:
        integer rp_lib, rp_units_convert_dbl
        integer io, ok
        character*255 inFile, strVal


c       for input.string(value1)
        character*255 value1


c       open the XML file containing the run parameters
        call getarg(1,inFile)
        io = rp_lib(inFile)
        if (io .eq. 0) then
            write(6,*) "FAILED loading Rappture data from ",inFile
            stop
        endif

c       ----------------------------------------------------------
c       Get input values from Rappture
c       ----------------------------------------------------------

c       get input value for input.string(value1)
        call rp_lib_get(io,
     +    "input.string(value1).current", value1)


c       ----------------------------------------------------------
c          Add your code here for the main body of your program
c       ----------------------------------------------------------

c       spit out progress messages as you go along...
        call rp_utils_progress (0, "Starting...")
        call rp_utils_progress (5, "Loading data...")
        call rp_utils_progress (50, "Half-way there")
        call rp_utils_progress (100, "Done")

c       ----------------------------------------------------------
c       Save output values back to Rappture
c       ----------------------------------------------------------

c       save output value for output.histogram(value6)
c       this shows just one point -- modify as needed
c       (x,h,w) = x-coord, height of bar, and width of bar (optional)
        write(strVal,'(E20.12,E20.12,E20.12,A)') x, h, w, char(10)
        call rp_lib_put_str(io,
     +    "output.histogram(value6).component.xhw",strVal,1)


        call rp_result(io)
      end program main
