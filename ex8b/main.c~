/*
 * ----------------------------------------------------------------------
 *  MAIN PROGRAM - generated by the Rappture Builder
 * ----------------------------------------------------------------------
 */
#include "rappture.h"

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <unistd.h>

int main(int argc, char * argv[]) {
    /* stuff needed for Rappture library */
    RpLibrary* io;
    const char* data; char line[255];
    int err;

    const char* value1;  /* for input.string(value1) */
    

    /* open the XML file containing the run parameters */
    io = rpLibrary(argv[1]);

    if (io == NULL) {
        /* cannot open file or out of memory */
        printf("FAILED loading Rappture data\n");
        exit(1);
    }

    /*
     *********************************************************
     * Get input values from Rappture
     *********************************************************
     */
    
    /* get input value for input.string(value1) */
    rpGetString(io,"input.string(value1).current", &value1);
    

    /*
     *********************************************************
     *  Add your code here for the main body of your program
     *********************************************************
     */

    /* spit out progress messages as you go along... */
    rpUtilsProgress(0, "Starting...");
    rpUtilsProgress(5, "Loading data...");
    rpUtilsProgress(50, "Half-way there");
    rpUtilsProgress(100, "Done");

    /*
     *********************************************************
     * Save output values back to Rappture
     *********************************************************
     */
    
    /* save output value for output.histogram(value2) */
    /* this shows just one point -- modify as needed */
    /* (x,h,w) = x-coord, height of bar, and width of bar (optional) */
    sprintf(line, "%g %g %g\n", x, h, w);
    rpPutString(io,"output.histogram(value2).component.xhw", line, RPLIB_APPEND);
    

    rpResult(io);
    exit(0);
}